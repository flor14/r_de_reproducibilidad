---
title: "Reproducibilidad"
subtitle: "Una serie de herramientas"  
author: 
  - "Florencia D'Andrea"
date: '`r Sys.Date()`'
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: xaringan-themer.css
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE, echo = FALSE)
```

```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
style_duo_accent(
  primary_color = "#1381B0",
  secondary_color = "#FF961C",
  inverse_header_color = "#FFFFFF",
    code_font_family = "Fira Code",
  code_font_url = "https://cdn.jsdelivr.net/gh/tonsky/FiraCode@2/distr/fira_code.css"
)

```


# Hola! AquÃ­ Florencia

- Biologa / Investigadora postdoctoral INTA-CONICET

- Â¡Me encanta enseÃ±ar!

- FanÃ¡tica de las clases de actuaciÃ³n y las actividades al aire libre

- Web [florencia.netlify.app](florencia.netlify.app)

- Twitter [@cantoflor87](twitter.com/cantoflor_87)

---

class: center, middle

### Â¿CÃ³mo se me ocurriÃ³ dar esta charla?

![](https://media.giphy.com/media/l3vR85PnGsBwu1PFK/giphy.gif)

---

background-image: url("images/repro.png")
background-position: center
background-size: contain

---

# Anna Krystalli en UseR! 2020

[Video](https://www.youtube.com/watch?v=KHMW8fV2NXo) - [Filminas](https://annakrystalli.me/talks/user2020.html#1)



```{r echo=FALSE, out.height=400, out.width=600}
knitr::include_graphics("images/anna.png")
```



---

```{r echo=FALSE}
knitr::include_graphics("images/1.png")
```

---

```{r echo=FALSE}
knitr::include_graphics("images/2.png")
```


---

# LatinR 2020

Conferencia Latinoamericana sobre Uso de R en InvestigaciÃ³n + Desarrollo

7 al 9 de octubre 2020 - Virtual

[latin-r.com](latin-r.com)

```{r echo=FALSE, out.height=200, out.width=200}
knitr::include_graphics("images/latinr.jpg")
```



---
class: inverse, center, middle

# Empecemos

---

# Â¿QuÃ© es la reproducibilidad?

> Los autores proporcionan todos los datos necesarios y el cÃ³digo para ejecutar el anÃ¡lisis nuevamente y recrear los resultados. 


--


> Reproducibilidad computacional: cuando se proporciona informaciÃ³n detallada sobre cÃ³digo, software, hardware y detalles de implementaciÃ³n.



.footnote[Claerbout-Karrenbach(1992) - Reproducibility]

---

# Ventajas de la reproducibilidad

1. Genera un historial de tu trabajo
 
 * datos
 * herramientas 
 * mÃ©todos
 * cÃ³digo
 * documentaciÃ³n 

2. MÃ¡s fÃ¡cil que recibir colaboraciones

3. Publish validated research and avoid misinformation

4. Write your papers, thesis and reports efficiently

5. Get credits for your work fairly

6. Ensure continuity of your work


---

# Â¿A quiÃ©n no le paso?

--

**Quiero correr mi cÃ³digo en otra computadora o compartirlo**

--

PROBLEMAS:

 * Rutas de archivos 
 
 * Problemas con las versiones del software o formatos de archivos

--

**Quiero correr mi cÃ³digo luego de cierto tiempo**

--

PROBLEMAS:

 * ActualicÃ© los paquetes y el softwares
 
 * Cambios en las extensiones de los archivos, que pueden volverse ilegibles (por ejemplo .xls y .xlsx)

---

class: center, middle, inverse


# Compartiendo mi cÃ³digo

---

class: center, middle

# Entornos computacionales


---

## Hay varias formas de capturar entornos computacionales.

* Sistemas de administraciÃ³n de paquetes (packrat - renv)

* Binder

* MÃ¡quinas virtuales 

* Contenedores

---

# Binder

Una versiÃ³n de un proyecto dentro de un entorno computacional reproducible con la cual se puede compartir e interactuar a travÃ©s de un navegador web.


```{r echo = FALSE}
knitr::include_graphics("images/binderlogo.png")
```


---

.pull-left[
## Beneficios

- Es relatiamente facil de usar

- Podes acceder a la informaciÃ³n con solo un click

- Es gratuito
]
.pull-right[
## Limitaciones

- Potencia computacional

- Seguridad/privacidad (si usan mybinder.org)

- Also no FTP for connecting to some data.
]

---

# Â¿QuÃ© es un BinderHub?


```{r echo = FALSE}
knitr::include_graphics("images/siberia.jpg")
```



---

# mybinder.org 

Un BinderHub pÃºblico y gratuito. Debido a que es pÃºblico, no debe usarlo si su proyecto requiere informaciÃ³n personal o confidencial (como contraseÃ±as).

```{r echo=FALSE}
knitr::include_graphics("images/mybinder.png")
```


---

# "Binderizando" tu proyecto ğŸŒ€

Crear una versiÃ³n Binderizada de un proyecto implica tres pasos clave que se explicarÃ¡n en esta secciÃ³n:

--
1. Especificar el entorno computacional. (**intall.R y runtime.txt** )

--

2. Subir los archivos del proyecto en algÃºn lugar disponible al pÃºblico (**GitHub o GitLab**)

--

3. Binderizar el proyecto (**mybinder.org**)


---

# 1. Especificar el entorno computacional

> runtime.txt

Especifica la version de R para que use Binder.

Para esto debes encontrar la fecha en que esta version fue capturada en MRAN e incluirla en el archivo como
`r-<YYYY>-<MM>-<DD>`

> install.R o DESCRIPTION (R/RStudio)

Este archivo debe contener una lista de todos los paquetes a ser instalados

`install.packages("tibble")`


---

# Â¿QuÃ© es MRAN? ğŸ“·


Desde el 17 de septiembre de 2014, Microsoft toma una instantÃ¡nea diaria ğŸ“¸ de todo el repositorio de CRAN y la almacena en [MRAN](https://mran.microsoft.com/documents/rro/reproducibility#reproducibility). 

Estas instantÃ¡neas han estado disponibles para la comunidad R desde entonces.

Paquete `checkpoint` me permite recuperar las versiones en el repositorio de CRAN para un determinado dÃ­a.

---

# 2. Sube tu cÃ³digo a GitHub


---

# 3. Binderiza tu proyecto ğŸŒ€

a. DirÃ­gete a https://mybinder.org

b. Pegue la URL del repositorio de GitHub del proyecto
`https://github.com/<your-username>/<your-repository>`

c. Finalmente, haz clic en el botÃ³n de LAUNCH. 
Esto le pedirÃ¡ a mybinder.org que cree el entorno necesario para ejecutar el proyecto, tenga en cuenta que esto puede llevar varios minutos.

---

# Â¡Paciencia! Esto lleva un rato â³


---

# Abrir tu proyecto con RStudio IDE


Cambia el link 

`https://mybinder.org/v2/gh/<usuario>/<repositorio>/<rama>?urlpath?rstudio`

Ejemplo de mi app: https://mybinder.org/v2/gh/flor14/test_shiny/master?urlpath=shiny/test/

---

class: center, middle, inverse

# ğŸŒ€ Binderiza tu Shiny App ğŸŒ€

---

# Los pasos 1 y 2 son los mismos

1. SubÃ­ tu app a una carpeta en tu repo de GitHub

2. Especifica el entorno computacional



---

# 3. Agrega el archivo `index.pynb`

Lo descargas desde [acÃ¡]()

---

# 4. Binderiza tu proyecto ğŸŒ€

a. DirÃ­gete a https://mybinder.org

b. Pegue la URL del repositorio de GitHub del proyecto
`https://github.com/<your-username>/<your-repository>`

c. Finalmente, haz clic en el botÃ³n de LAUNCH. 


Â¡Recorda que lleva un rato este paso! â³


---

# Â¡Listo!


Tenes que llamar la app usando este link si tenes tu datos en github

`https://mybinder.org/v2/gh/<usuario>/<repositorio>/<rama>?urlpath=shiny/<carpeta>/`

Ejemplo de mi app: https://mybinder.org/v2/gh/flor14/test_shiny/master?urlpath=shiny/test/

---



# Links

* [Proyectos en R - R4DS](https://r4ds.had.co.nz/workflow-projects.html#rstudio-projects)

* [The Turing Way Book](https://the-turing-way.netlify.app/)

* [Reproducible Environments - RStudio](https://environments.rstudio.com/)

* [Time_Travel_R (Webinar) - Sean Lopp](https://rstudio.com/resources/webinars/time-travel-r/)

* [renv: Project Environments with R - RStudio blog](https://blog.rstudio.com/2019/11/06/renv-project-environments-for-r/)

* [Rrtools]()

* [Reproducible Research with R - ROpensci Call](https://ropensci.org/commcalls/2019-07-30/)

* [Holepunch]()

---

class: center, middle

# Thanks!

Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).

The chakra comes from [remark.js](https://remarkjs.com), [**knitr**](http://yihui.name/knitr), and [R Markdown](https://rmarkdown.rstudio.com).
