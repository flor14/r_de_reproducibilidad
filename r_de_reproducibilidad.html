<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>R de Reproducible</title>
    <meta charset="utf-8" />
    <meta name="author" content="Florencia D’Andrea" />
    <meta name="date" content="2020-07-15" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# R de Reproducible
## Una serie de herramientas para mejorar tu código
### Florencia D’Andrea
### 2020-07-15

---






background-image: url(https://upload.wikimedia.org/wikipedia/commons/b/be/Sharingan_triple.svg)

???






Image credit: [Wikimedia Commons](https://commons.wikimedia.org/wiki/File:Sharingan_triple.svg)

---
class: center, middle

# Hola!

### Aquí Florencia

---

### ¿Cómo se me ocurrió dar esta charla?


---

# Anna Krystalli en UseR! 2020

ReproHack



```r
knitr::include_graphics("images/hex_reprohack.png")
```

&lt;img src="images/hex_reprohack.png" width="100" height="100" /&gt;


---

# LatinR 2020

---
class: inverse, center, middle

# Empecemos

---

# ¿Qué es la reproducibilidad?

&gt; Los autores proporcionan todos los datos necesarios y el código para ejecutar el análisis nuevamente y recrear los resultados. 

--

&gt; Reproducibilidad computacional: cuando se proporciona información detallada sobre código, software, hardware y detalles de implementación.


```r
#knitr::include_graphics()
```


.footnote[ClaerboutKarrenbach(1992)Reproducibility]

---

# Ventajas de la reproducibilidad

1. Genera un historial de tu trabajo
 
 * datos
 * herramientas 
 * métodos
 * código
 * documentación 

2. Más fácil que recibir colaboraciones

3. Publish validated research and avoid misinformation

4. Write your papers, thesis and reports efficiently

5. Get credits for your work fairly

6. Ensure continuity of your work


---

# ¿A quién no le paso?

* Quiero correr mi código en otra computadora o compartirlo

* Quiero correr mi codigo luego de cierto tiempo

---

# ¿A quién no le paso?

* Quiero correr mi código en otra computadora o compartirlo

PROBLEMAS:
 * Rutas de archivos diferentes
 * 

* Quiero correr mi codigo luego de cierto tiempo

PROBLEMAS:
 * Cambios en las versiones de los paquetes y los softwares
 * Cambios en las extensiones de los archivos, que pueden volverse ilegibles (por ejemplo .xls y .xlsx)

---

class: center, middle, inverse


# Compartiendo mi código

---

# Entornos computacionales


--- 


.footnote[https://environments.rstudio.com/]

---

Hay varias formas de capturar entornos computacionales.

* Sistemas de administración de paquetes (packrat - renv)

* Binder

* Máquinas virtuales 

* Contenedores

---

# Binder

Binder: una versión que se puede compartir de un proyecto que se puede ver e interactuar dentro de un entorno computacional reproducible a través de un navegador web.


---

# Mybinder.org 

mybinder.org: un BinderHub público y gratuito. Debido a que es público, no debe usarlo si su proyecto requiere información personal o confidencial (como contraseñas).


```r
knitr::include_graphics("images/mybinder.png")
```

&lt;img src="images/mybinder.png" width="1788" /&gt;


---

# Creando un Binder para un proyecto

Crear una versión Binderizada de un proyecto implica tres pasos clave que se explicarán en esta sección:

--
1. Especificar el entorno computacional. **intall.R + runtime.txt**
--
2. Coloque los archivos del proyecto en algún lugar disponible al público (**GitHub - GitLab**)
--
3. Generar un enlace a una carpeta del proyecto


---

# 1. Especificar el entorno computacional

&gt; runtime.txt

Especifica la version de R para que use Binder.

Para esto debes encontrar la fecha en que esta version fue capturada en MRAN e incluirla en el archivo como
`r-&lt;YYYY&gt;-&lt;MM&gt;-&lt;DD&gt;`

&gt; install.R o DESCRIPTION (R/RStudio)

Este archivo debe contener una lista de todos los paquetes a ser instalados

`install.packages("tibble")`


---

# ¿Qué es MRAN?


---

# 2. Sube tu código a GitHub


---

# 3. Genere un enlace a una carpeta de su proyecto

a. Dirígete a https://mybinder.org

b. Pegue la URL del repositorio de GitHub del proyecto
`https://github.com/&lt;your-username&gt;/&lt;your-repository&gt;`

c. Finalmente, haz clic en el botón de LAUNCH. 
Esto le pedirá a mybinder.org que cree el entorno necesario para ejecutar el proyecto, tenga en cuenta que esto puede llevar varios minutos.

---

class: center, middle, inverse


5 pasos para usar RStudio IDE
desde GitHub + mybinder.org

---

# Paso 1: Generar un repositorio de GitHub con 


What happens when a Binder link is clicked?¶
The link to the repository is resolved by BinderHub.

BinderHub searches for a Docker image relating to the provided reference (for example, git commit hash, branch or tag).

If a Docker image is not found, BinderHub requests resources from the Kubernetes cluster to run repo2docker to do the following:

Fetch the repository,

Build a Docker image containing the software requested in the configuration file,

Push that image to the Docker registry.

BinderHub sends the Docker image to JupyterHub.

JupyterHub requests resources from the Kubernetes cluster to serve the Docker image.

JupyterHub connects the user’s browser to the running Docker environment.

JupyterHub monitors the container for activity and destroys it after a period of inactivity.

---



.footnote

---

class: center, middle, inverse


5 pasos para usar RStudio IDE
desde GitHub + mybinder.org
---

# Links

* [Proyectos en R - R4DS](https://r4ds.had.co.nz/workflow-projects.html#rstudio-projects)

* [The Turing Way Book](https://the-turing-way.netlify.app/)

* [Reproducible Environments - RStudio](https://environments.rstudio.com/)

* [Time_Travel_R (Webinar) - Sean Lopp](https://rstudio.com/resources/webinars/time-travel-r/)

* [renv: Project Environments with R - RStudio blog](https://blog.rstudio.com/2019/11/06/renv-project-environments-for-r/)

* [Rrtools]()

* [Holepunch]()

---

class: center, middle

# Thanks!

Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).

The chakra comes from [remark.js](https://remarkjs.com), [**knitr**](http://yihui.name/knitr), and [R Markdown](https://rmarkdown.rstudio.com).
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
